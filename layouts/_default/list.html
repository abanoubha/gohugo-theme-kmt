{{ define "main" }}

{{ if not .IsHome }}
<h1>{{ .Title }}</h1>
{{ end }}

<article id="archive">
  <section>
    {{ .Content }}
  </section>
  <section>
    {{ $featuredPages := where .Site.Pages "Params.featured" "==" true }}
    {{ range $index, $page := $featuredPages }}
    <div class="post">

      <div class="date">
        <time datetime="{{ .PublishDate }}">{{ T "publishDateShort" . }}</time>
      </div>
      
      <h2 class="title">
        <svg xmlns="http://www.w3.org/2000/svg" height="1rem" viewBox="0 0 21.65 21.65">
          <path
            d="m21.65 21.65-5.41-8.12 2.94-2.94a.81.81 0 0 0 0-1.15L17.75 8l-1.1.24A1.62 1.62 0 0 1 15.39 8L9.32 3.83a1.62 1.62 0 0 1-.7-1.4V1.08L7.58 0 0 7.58l1.08 1.08H2.49a1.62 1.62 0 0 1 1.34.71L8 15.39a1.62 1.62 0 0 1 .25 1.26L8 17.75l1.43 1.43a.81.81 0 0 0 1.15 0l2.94-2.94 8.12 5.41Zm-3.9-3.9-3.43-2.29 1.14-1.14 2.29 3.43Z"
            fill="currentColor" />
        </svg>
        <a href="{{ .RelPermalink }}">{{ .LinkTitle }}</a>
      </h2>

      <p>{{ .Summary }}</p>

      {{ with .Params.tags }}
      <div class="tags">
        {{ T "tags" }}:
        {{ range . }}
        <a href="{{ "tags/" | absURL }}{{ . | urlize }}">{{ . }}</a>
        {{ end }}
      </div>
      {{ end}}

      {{ with .Params.categories }}
      <div class="categories">
        {{ T "categories" }}:
        {{ range . }}
        <a href="{{ "categories/" | absURL }}{{ . | urlize }}">{{ . }}</a>
        {{ end }}
      </div>
      {{ end}}

    </div>
    {{ end }}
  </section>
  <section>
    {{ range (where .Paginator.Pages "Type" "posts") }}
    <div class="post">

      <div class="date">
        <time datetime="{{ .PublishDate }}">{{ T "publishDateShort" . }}</time>
      </div>
      
      <h2 class="title"><a href="{{ .RelPermalink }}">{{ .LinkTitle }}</a></h2>

      <p>{{ .Summary }}</p>

      {{ partial "tags.html" . }}

      {{ with .Params.categories }}
      <div class="categories">
        {{ T "categories" }}:
        {{ range . }}
        <a href="{{ "categories/" | relURL }}{{ . | urlize }}">{{ . }}</a>
        {{ end }}
      </div>
      {{ end}}

    </div>
    {{ end }}
  </section>
  {{- template "_internal/pagination.html" . -}}
</article>
{{ end }}